<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Â¡Felicidades!</title>
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #fffbea;
    margin: 0;
    padding: 0;
}

/* Banner superior tipo rectÃ¡ngulo decorativo */
.banner-final {
    width: 100%;
    padding: 25px 0;
    background: linear-gradient(90deg, #fbc02d, #ffeb3b, #f57f17);
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    color: #ffffff;
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    letter-spacing: 2px;
}

/* BotÃ³n estilo final */
.btn-final {
    padding: 15px 30px;
    font-size: 1.2em;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background-color: #4caf50;
    color: white;
    margin: 10px;
    transition: 0.3s;
}

.btn-final:hover {
    background-color: #45a049;
}

/* Contenedor botones */
.acciones-final {
    text-align: center;
    margin-top: 30px;
}

/* BotÃ³n regresar */
.btn-regresar {
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 10px 20px;
    font-size: 1em;
    border-radius: 8px;
    border: none;
    background-color: #555;
    color: white;
    cursor: pointer;
}

.btn-regresar:hover {
    background-color: #333;
}

/* Canvas confeti */
#confeti {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 999;
}
</style>
</head>
<body>

<header>
    <button id="btnRegresar" class="btn-regresar">â¬… Regresar</button>
</header>

<div class="banner-final">
    ðŸŽ‰âœ¨ðŸŽŠ Â¡Felicidades! Has completado la lecciÃ³n ðŸŽŠâœ¨ðŸŽ‰
</div>

<div class="acciones-final">
    <button id="btnJugarDeNuevo" class="btn-final">Jugar de nuevo</button>
    <button id="btnContinuar" class="btn-final">Continuar</button>
</div>

<audio id="sonidoYeh" src="audios/yeh.mp3"></audio>

<canvas id="confeti"></canvas>

<script>
// --- Reproducir sonido al cargar ---
window.addEventListener('load', () => {
    const audio = document.getElementById('sonidoYeh');
    audio.play().catch(()=>{});
});

// Leer el parÃ¡metro de la URL
const params = new URLSearchParams(window.location.search);
const origen = params.get("origen"); // "juego" o "juego2"

// BotÃ³n Jugar de nuevo
document.getElementById("btnJugarDeNuevo").addEventListener("click", () => {
    if (origen === "juego") {
        window.location.href = "juego.html";
    } else if (origen === "juego2") {
        window.location.href = "juego2.html";
    } else if (origen === "juego1L2") {
        window.location.href = "juego1L2.html";
    } else if (origen === "juego2L2") {
        window.location.href = "juego2L2.html";
    } else {
        window.location.href = "teoria.html";
    }
});


document.getElementById("btnContinuar").addEventListener("click", () => {
    if (origen === "juego") {
        window.location.href = "juego2.html?origen=juego2";
    } else if (origen === "juego2") {
        window.location.href = "index.html";
    } else if (origen === "juego1L2") {
        window.location.href = "juego2L2.html?origen=juego2L2";
    } else if (origen === "juego2L2") {
        window.location.href = "index.html";
    } else if (origen === "juego1L3") {
        window.location.href = "juego2L3.html?origen=juego2L3";
    } else if (origen === "juego2L3") {
        window.location.href = "index.html";
    } else if (origen === "juego1L4") {
        window.location.href = "juego2L4.html?origen=juego2L4";
    } else if (origen === "juego2L4") {
        window.location.href = "index.html";
    } else if (origen === "juego1L5") {
        window.location.href = "juego2L5.html?origen=juego2L5";
    } else if (origen === "juego2L5") {
        window.location.href = "index.html";
    } else {
        window.location.href = "index.html"; // fallback
    }
});




// BotÃ³n Regresar â†’ Siempre al menÃº
document.getElementById("btnRegresar").addEventListener("click", () => {
    window.location.href = "index.html";
});

// --- Confeti animado ---
const canvas = document.getElementById('confeti');
const ctx = canvas.getContext('2d');
let confeti = [];

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function crearConfeti() {
    for (let i = 0; i < 150; i++) {
        confeti.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            r: Math.random() * 6 + 4,
            d: Math.random() * 150 + 50,
            color: `hsl(${Math.random()*360}, 100%, 50%)`,
            tilt: Math.random() * 10 - 10,
            tiltAngleIncremental: Math.random() * 0.07 + 0.05,
            tiltAngle: 0
        });
    }
}
crearConfeti();

function dibujarConfeti() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    confeti.forEach((c,i)=>{
        ctx.beginPath();
        ctx.lineWidth = c.r / 2;
        ctx.strokeStyle = c.color;
        ctx.moveTo(c.x + c.tilt + c.r/4, c.y);
        ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r/2);
        ctx.stroke();
        c.tiltAngle += c.tiltAngleIncremental;
        c.y += (Math.cos(c.d) + 3 + c.r/2)/2;
        c.tilt = Math.sin(c.tiltAngle) * 15;

        if(c.y > canvas.height){
            confeti[i] = {
                x: Math.random() * canvas.width,
                y: -10,
                r: c.r,
                d: c.d,
                color: c.color,
                tilt: c.tilt,
                tiltAngleIncremental: c.tiltAngleIncremental,
                tiltAngle: c.tiltAngle
            };
        }
    });
    requestAnimationFrame(dibujarConfeti);
}
dibujarConfeti();
</script>

</body>
</html>

